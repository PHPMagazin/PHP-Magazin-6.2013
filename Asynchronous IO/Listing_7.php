class Importer extends Thread {  protected $filename;  public function __construct($filename) {    $this->filename = $filename;  }  public function run() {    $fp = fopen($this->filename, "r");    $db = new PDO('mysql:host=localhost;dbname=test', 'test', 'test');        while (($data = fgetcsv($fp, 0, ",")) !== false) {      $sql = "INSERT INTO test (f1, f2, f3) VALUES ('%s', '%s', '%s')";      $db->exec(sprintf($sql, $data[0], $data[1], $data[2]));    }    fclose($fp);  }}$files = array('file-0-big.csv', 'file-2.csv', 'file-2.csv', 'file-3.csv');$writers = array();$counter = 0;foreach ($files as $file) {  $writers[$counter] = new Importer($file);  $writers[$counter]->start();  $counter++;}for ($z = 0; $z < sizeof($writers); $z++) {  $writers[$z]->join();}